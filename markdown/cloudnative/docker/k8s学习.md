# 容器技术生态的发展

### FaaS 和 IaaS、PaaS 的区别
首先，我们看一下云函数，或者说 FaaS 和 IaaS、PaaS 的区别。如下图所示，FaaS 不仅给用户提供了标准的 Runtime，同时在应用层，也帮用户管理了请求的调度。开发者只用聚焦在核心业务逻辑开发上，按照函数的粒度去编写代码。而底层硬件相关的资源维护，则交给更加专业的云厂商来搞定。因此，对于用户来讲，则可以把更多的精力和时间放在业务上。而 IaaS 和 PasS，则均需要用户去运维云主机或者容器集群、搭建业务所需的运行环境。
// TODO 图

#### PaaS
2013 年左右，普遍认为 `PaaS` 的时代就要来了。PaaS 项目被大家接纳的一个主要原因，就是它提供了一种名叫`"应用托管"`的能力。当时的云计算服务，比的就是谁能更好地模拟本地服务器环境，能带来更好的“上云”体验。而 PaaS 开源项目的出现，就是当时解决这个问题的一个最佳方案。

PaaS 项目，最核心的组件就是一套应用的打包和分发机制。举个例子，运维人员只需要在这些机器上部署一个 Cloud Foundry 的 Paas 项目，然后开发者只要执行一条命令就能把本地的应用部署到云上，这条命令就是：
```js
$ cf push "我的应用"
```
事实上，像 Cloud Foundry 这样的 PaaS 项目，最核心的组件就是`一套应用的打包和分发机制`。 Cloud Foundry 为每种主流编程语言都定义了一种打包格式，而`cf push`的作用，基本上等同于用户把应用的可执行文件和启动脚本打进一个压缩包内，上传到云上 Cloud Foundry 的存储中。接着，Cloud Foundry 会通过调度器选择一个可以运行这个应用的虚拟机，然后通知这个机器上的 Agent 把应用压缩包下载下来启动。

然后，由于需要在一个虚拟机上启动很多个来自不同用户的应用，Cloud Foundry 会调用操作系统的 Cgroups 和 Namespace 机制为每一个应用单独创建一个称作“沙盒”的隔离环境，然后在“沙盒”中启动这些应用进程。这样，就实现了把多个用户的应用互不干涉地在虚拟机里批量地、自动地运行起来的目的。

这，正是 PaaS 项目最核心的能力。 而这些 Cloud Foundry 用来运行应用的隔离环境，或者说“沙盒”，就是所谓的“容器”。

但是一旦用上了 PaaS，用户就必须为每种语言、每种框架，甚至每个版本的应用维护一个打好的包。这个打包过程，没有任何章法可循，更麻烦的是，明明在本地运行得好好的应用，却需要做很多修改和配置工作才能在 PaaS 里运行起来。而这些修改和配置，并没有什么经验可以借鉴，基本上得靠不断试错，直到你摸清楚了本地应用和远端 PaaS 匹配的“脾气”才能够搞定。
最后结局就是，“cf push”确实是能一键部署了，但是为了实现这个一键部署，用户为每个应用打包的工作可谓一波三折，费尽心机。而Docker 项目的出现，则为这个根本性的问题提供了一个近乎完美的解决方案。

### 参考资料
+ https://www.infoq.cn/article/kki1vyk62uoclw23ikyk